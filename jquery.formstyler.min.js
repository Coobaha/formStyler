/* jQuery Form Styler v1.2.5 | (c) Dimox | http://dimox.name/jquery-form-styler/ */
(function(d){d.fn.styler=function(k){k=d.extend({browseText:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",singleSelectzIndex:"1000",selectVisibleOptions:0},k);return this.each(function(){var a=d(this),p=cl="";void 0!==a.attr("id")&&""!=a.attr("id")&&(p=' id="'+a.attr("id")+'"');void 0!==a.attr("class")&&""!=a.attr("class")&&(cl=" "+a.attr("class"));a.is(":checkbox")?a.css({position:"absolute",left:-9999}).each(function(){if(1>a.next("span.jq-checkbox").length){var b=d("<span"+p+' class="jq-checkbox'+
cl+'" style="display: inline-block"><span></span></span>');a.after(b);a.is(":checked")&&b.addClass("checked");a.is(":disabled")&&b.addClass("disabled");b.click(function(){if(!b.is(".disabled"))return a.is(":checked")?(a.removeAttr("checked"),b.removeClass("checked")):(a.attr("checked",!0),b.addClass("checked")),a.change(),!1});a.parent("label").add('label[for="'+a.attr("id")+'"]').click(function(a){b.click();a.preventDefault()});a.change(function(){a.is(":checked")?b.addClass("checked"):b.removeClass("checked")}).keydown(function(d){a.parent("label").length&&
(13==d.which||32==d.which)&&b.click()}).focus(function(){b.is(".disabled")||b.addClass("focused")}).blur(function(){b.removeClass("focused")});a.on("refresh",function(){a.is(":checked")?b.addClass("checked"):b.removeClass("checked");a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is(":radio")?a.css({position:"absolute",zIndex:"-5"}).each(function(){if(1>a.next("span.jq-radio").length){var b=d("<span"+p+' class="jq-radio'+cl+'" style="display: inline-block"><span></span></span>');
a.after(b);a.is(":checked")&&b.addClass("checked");a.is(":disabled")&&b.addClass("disabled");b.click(function(){if(!b.is(".disabled"))return d('input[name="'+a.attr("name")+'"]').removeAttr("checked").next().removeClass("checked"),a.attr("checked",!0).next().addClass("checked"),a.change(),!1});a.parent("label").add('label[for="'+a.attr("id")+'"]').click(function(a){b.click();a.preventDefault()});a.change(function(){d('input[name="'+a.attr("name")+'"]').next().removeClass("checked");a.next().addClass("checked")}).focus(function(){b.is(".disabled")||
b.addClass("focused")}).blur(function(){b.removeClass("focused")});a.on("refresh",function(){a.is(":checked")&&(d('input[name="'+a.attr("name")+'"]').next().removeClass("checked"),b.addClass("checked"));a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is(":file")?a.css({position:"absolute",top:"-50%",right:"-50%",fontSize:"200px",opacity:0}).each(function(){if(1>a.parent("span.jq-file").length){var b=d("<span"+p+' class="jq-file'+cl+'" style="display: inline-block; position: relative; overflow: hidden"></span>'),
n=d('<div class="name" style="float: left; white-space: nowrap"></div>').appendTo(b);d('<div class="browse" style="float: left">'+k.browseText+"</div>").appendTo(b);a.after(b);b.append(a);a.is(":disabled")&&b.addClass("disabled");a.change(function(){n.text(a.val().replace(/.+[\\\/]/,""))}).focus(function(){b.addClass("focused")}).blur(function(){b.removeClass("focused")}).click(function(){b.removeClass("focused")}).on("refresh",function(){a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):
a.is("select")&&a.each(function(){if(1>a.next("span.jqselect").length){var b=function(a){a.bind("mousewheel DOMMouseScroll",function(a){var b=null;"mousewheel"==a.type?b=-1*a.originalEvent.wheelDelta:"DOMMouseScroll"==a.type&&(b=40*a.originalEvent.detail);b&&(a.preventDefault(),d(this).scrollTop(b+d(this).scrollTop()))})},n=function(){var h=d("<span"+p+' class="jq-selectbox jqselect'+cl+'" style="display: inline-block; position: relative; z-index:'+k.singleSelectzIndex+'"><div class="select" style="float: left"><div class="text"></div><b class="trigger"><i class="arrow"></i></b></div></span>');
a.after(h).css({position:"absolute",left:-9999});var f=h.find("div.select"),g=h.find("div.text"),e=a.find("option"),j=e.filter(":selected");j.length?g.text(j.text()):g.text(e.filter(":first").text());if(a.is(":disabled"))h.addClass("disabled");else{j="";for(i=0;i<e.length;i++){var l=optionClass="";void 0!==e.eq(i).attr("class")&&(l=' class="'+e.eq(i).attr("class")+'"',optionClass=" "+e.eq(i).attr("class"));var t=' class="disabled'+optionClass+'"',u=' class="selected sel disabled'+optionClass+'"';
"undefined"!==typeof e.eq(i).attr("selected")&&!1!==e.eq(i).attr("selected")&&(l=' class="selected sel'+optionClass+'"');e.eq(i).is(":disabled")&&(l=t);e.eq(i).is(":selected:disabled")&&(l=u);j+="<li"+l+">"+e.eq(i).text()+"</li>"}var c=d('<div class="dropdown" style="position: absolute; overflow: auto; overflow-x: hidden"><ul style="list-style: none">'+j+"</ul></div>");h.append(c);var m=c.find("li"),n=h.outerHeight();"auto"==c.css("left")&&c.css({left:0});"auto"==c.css("top")&&c.css({top:n});var q=
m.outerHeight(),r=c.css("top");c.hide();f.click(function(){var a=h.offset().top,e=d(window).height()-n-(a-d(window).scrollTop()),f=k.selectVisibleOptions,g=6*q,j=q*f;0<f&&6>f&&(g=j);0>e||e<g?(c.height("auto").css({top:"auto",bottom:r}),c.outerHeight()>a-d(window).scrollTop()-20&&(c.height(Math.floor((a-d(window).scrollTop()-20)/q)*q),0<f&&6>f?c.height()>g&&c.height(g):6<f&&c.height()>j&&c.height(j))):e>g&&(c.height("auto").css({bottom:"auto",top:r}),c.outerHeight()>e-20&&(c.height(Math.floor((e-20)/
q)*q),0<f&&6>f?c.height()>g&&c.height(g):6<f&&c.height()>j&&c.height(j)));d("span.jqselect").css({zIndex:k.singleSelectzIndex-1}).removeClass("focused");h.css({zIndex:k.singleSelectzIndex});c.is(":hidden")?(d("div.dropdown:visible").hide(),c.show(),h.addClass("opened")):(c.hide(),h.removeClass("opened"));m.filter(".selected").length&&c.scrollTop(c.scrollTop()+m.filter(".selected").position().top-c.innerHeight()/2+m.filter(".selected").outerHeight()/2);b(c);return!1});m.hover(function(){d(this).siblings().removeClass("selected")});
var s=m.filter(".selected").text();m.filter(":not(.disabled)").click(function(){var b=d(this).text();s!=b&&(d(this).addClass("selected sel").siblings().removeClass("selected sel"),e.eq(d(this).index()).attr("selected",!0).siblings().removeAttr("selected"),s=b,g.text(b),a.change());c.hide()});c.mouseout(function(){c.find("li.sel").addClass("selected")});a.focus(function(){h.addClass("focused")}).blur(function(){h.removeClass("focused")}).keyup(function(){g.text(e.filter(":selected").text());m.removeClass("selected sel").eq(e.filter(":selected").index()).addClass("selected sel")});
d(document).on("click",function(a){d(a.target).parents().hasClass("selectbox")||(c.hide().find("li.sel").addClass("selected"),h.removeClass("focused opened"))})}},r=function(){var h=d("<span"+p+' class="jq-select-multiple jqselect'+cl+'" style="display: inline-block"></span>');a.after(h).css({position:"absolute",left:-9999});var f=a.find("option"),g="";for(i=0;i<f.length;i++){var e=optionClass="";void 0!==f.eq(i).attr("class")&&(e=' class="'+f.eq(i).attr("class")+'"',optionClass=" "+f.eq(i).attr("class"));
var j=' class="disabled'+optionClass+'"',l=' class="selected disabled'+optionClass+'"';"undefined"!==typeof f.eq(i).attr("selected")&&!1!==f.eq(i).attr("selected")&&(e=' class="selected'+optionClass+'"');f.eq(i).is(":disabled")&&(e=j);f.eq(i).is(":selected:disabled")&&(e=l);g+="<li"+e+">"+f.eq(i).text()+"</li>"}h.append("<ul>"+g+"</ul>");var g=h.find("ul"),k=h.find("li").attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none",
"user-select":"none"}),e=a.attr("size"),j=g.outerHeight(),l=k.outerHeight();void 0!==e&&0<e?g.css({height:l*e}):g.css({height:4*l});j>h.height()&&(g.css("overflowY","scroll"),b(g));a.is(":disabled")?(h.addClass("disabled"),f.each(function(){d(this).is(":selected")&&k.eq(d(this).index()).addClass("selected")})):k.filter(":not(.disabled)").click(function(b){var c=d(this);b.ctrlKey||c.addClass("selected");b.shiftKey||c.addClass("first");!b.ctrlKey&&!b.shiftKey&&c.siblings().removeClass("selected first");
b.ctrlKey&&(c.is(".selected")?c.removeClass("selected first"):c.addClass("selected first"),c.siblings().removeClass("first"));if(b.shiftKey){var e=next=!1;c.siblings().removeClass("selected").siblings(".first").addClass("selected");c.prevAll().each(function(){d(this).is(".first")&&(e=!0)});c.nextAll().each(function(){d(this).is(".first")&&(next=!0)});e&&c.prevAll().each(function(){if(d(this).is(".selected"))return!1;d(this).not(".disabled").addClass("selected")});next&&c.nextAll().each(function(){if(d(this).is(".selected"))return!1;
d(this).not(".disabled").addClass("selected")});1==k.filter(".selected").length&&c.addClass("first")}f.removeAttr("selected");k.filter(".selected").each(function(){f.eq(d(this).index()).attr("selected",!0)});a.change()})};a.is("[multiple]")?r():n();a.on("refresh",function(){a.next().remove();a.is("[multiple]")?r():n()})}})})}})(jQuery);